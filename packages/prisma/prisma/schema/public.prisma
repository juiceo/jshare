model Profile {
    userId    String             @id()
    email     String
    firstName String
    lastName  String
    groups    GroupParticipant[]
    images    Image[]

    createdAt DateTime @default(now())
    updatedAt DateTime @default(now()) @updatedAt

    @@map("profiles")
    @@schema("public")
}

model Group {
    id           String             @id @default(uuid())
    name         String
    currency     Currency
    participants GroupParticipant[]

    createdAt DateTime @default(now())
    updatedAt DateTime @default(now()) @updatedAt

    @@map("groups")
    @@schema("public")
}

model GroupParticipant {
    id      String  @id @default(uuid())
    userId  String
    user    Profile @relation(fields: [userId], references: [userId])
    groupId String
    group   Group   @relation(fields: [groupId], references: [id])
    role    Role

    createdAt DateTime @default(now())
    updatedAt DateTime @default(now()) @updatedAt

    @@index([groupId])
    @@index([userId])
    @@map("group_participants")
    @@schema("public")
}

model Image {
    id     String @id @default(uuid())
    path   String
    bucket String

    uploadedBy   Profile @relation(fields: [uploadedById], references: [userId])
    uploadedById String

    createdAt DateTime @default(now())
    updatedAt DateTime @default(now()) @updatedAt

    @@map("images")
    @@schema("public")
}

enum Role {
    Owner
    Admin
    Member

    @@schema("public")
}

enum Currency {
    USD
    EUR

    @@schema("public")
}
